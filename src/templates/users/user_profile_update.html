{% extends 'dashboard_base.html' %}

{% load static i18n %}
{% load crispy_forms_tags %}

{% block title %}{% trans 'Update Speaker Profile' %}{% endblock title %}

{% block dashboard_tablist %}
{% include '_includes/dashboard_tablist.html' with active='profile' %}
{% endblock dashboard_tablist %}

{% block main-content %}
<h3 class="dashboard-header">
	<span class="header-title">{% trans 'Edit Profile' %}</span>
</h3>

<form id="user_profile_update_form" method="post" enctype="multipart/form-data">
	{% csrf_token %}
	<div class="nesting-form-group">
		{{ form.non_field_errors }}
		<div class="form-group {% if form.photo.errors %}has-error{% endif %}">
		    <label for="{{ form.photo.id_for_label }}" class="control-label field_title">{% trans 'Profile Picture' %}</label>
		    <div class="profile_pic_panel">
		    	<div>
		    		<img class="img-circle pic" src="{% if form.photo.value %}{{ form.instance.photo.url }}{% else %}{% static 'images/default_head.png' %}{% endif %}">
		    	</div>
		    	<div class="btn upload-btn">
		    		<span>{% trans 'Upload' %}</span>
		    		<input id="id_photo" name="photo" type="file" />
		    		{% if form.photo.errors %}
		    			<p class="help-block">{% for error in form.photo.errors %}<strong>{{ error }}</strong>{% endfor %}</p>
		    		{% endif %}
		    	</div>
		    </div>
		    <p class="help-block">{% trans 'At least 800&times;800 pixels for best results in our printed conference booklet.' %}</p>
	    </div>
	</div>
	<div class="form-group {% if form.speaker_name.errors %}has-error{% endif %}">
		<label for="{{ form.speaker_name.id_for_label }}" class="control-label field_title requiredField">
			{% trans 'Your Name' %}<span class="asteriskField">*</span>
		</label>
		<input id="id_speaker_name" name="speaker_name" type="text" class="form-control field name_field" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" value="{{ form.speaker_name.value }}">
		{% if form.speaker_name.errors %}
			<p class="help-block">{% for error in form.speaker_name.errors %}<strong>{{ error }}</strong>{% endfor %}</p>
		{% endif %}
	</div>
	<div class="form-group {% if form.bio.errors %}has-error{% endif %}">
	    {{ form.bio.errors }}
	    <label for="{{ form.bio.id_for_label }}" class="control-label field_title requiredField">
	    	{% trans 'Biography' %}<span class="asteriskField">*</span>
	    </label>
	    <textarea id="id_bio" name="bio" maxlength="{{ form.bio.field.widget.attrs.maxlength }}" class="form-control field character-counted bio_field">{{ form.bio.value }}</textarea>
	    {% if form.bio.errors %}
			<p class="help-block">{% for error in form.bio.errors %}<strong>{{ error }}</strong>{% endfor %}</p>
		{% endif %}
	    <div class="help-block">
	    	<p>{% trans form.bio.help_text %}</p>
	    </div>
	</div>

	<button type="submit" class="btn btn-primary">{% trans 'Save' %}</button>

</form>
{% endblock main-content %}


{% block extra_js %}
{{ block.super }}
{% include '_includes/character_counter_template.html' %}
<script src="{% static 'js/character-counter.js' %}"></script>
{% endblock extra_js %}
