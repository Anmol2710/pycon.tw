{% extends 'contents/_base.html' %}

{% load i18n compress %}

{% block title %}{% trans 'Live broadcast' %}{% endblock %}

{% block body_class %}{{ block.super }} live-page{% endblock body_class %}

{% compress js %}
{% block scripts %}
{{ block.super }}
<script>
var next = document.querySelector("[name='next']");
var params = new URLSearchParams();
params.append('token', '{{ token }}');
next.value += `?${params.toString()}`;
</script>
{% endblock scripts %}
{% endcompress %}

{% block content %}

<section class="pill-title">
	<h1>{% trans 'Live broadcast' %}</h1>
</section>

{% if attendee.verified %}
{% for room, live in rooms.items %}
<div class="entry">
    <h3>{{ room }}</h3>
    {% if live %}
        <div class="video-container">
            <iframe width="560" height="315"
                    class="video"
                    src="https://www.youtube.com/embed/{{ live }}"
                    frameborder="0"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
        </div>
    {% else %}
    <p>
        {% trans 'This broadcast is not ready yet.' %}
    </p>
    {% endif %}
</div>
{% endfor %}

{% else %}

<p>
{% trans 'The broadcasts are not ready yet, please try again later.' %}
</p>

{% endif %}

{% endblock content %}
